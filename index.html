<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FalAI - Universal AI Image Generation</title>
    
    <!-- PWA metadata -->
    <meta name="description" content="Universal web application for AI image generation APIs">
    <meta name="theme-color" content="#f8fafc">
    <link rel="manifest" href="manifest.json">
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- Icons -->
    <link rel="icon" href="favicon.png" type="image/png">
    <link rel="apple-touch-icon" href="favicon.png">
</head>
<body>
    <div id="app">
        <header class="header">
            <h1>FalAI</h1>
            <div class="header-controls">
                <button id="add-endpoint-btn" class="btn secondary" title="Add Custom Endpoint">‚ûï</button>
                <button id="export-settings-btn" class="btn secondary" title="Export Settings">üì§</button>
                <button id="import-settings-btn" class="btn secondary" title="Import Settings">üì•</button>
                <button id="api-key-btn" class="btn secondary">Set API Key</button>
            </div>
        </header>
        
        <main class="main">
            <div class="left-panel">
                <div class="endpoint-selector">
                    <label for="endpoint-dropdown">Select Endpoint</label>
                    <select id="endpoint-dropdown" class="endpoint-dropdown">
                        <option value="">Choose an endpoint...</option>
                    </select>
                </div>
                
                <div id="endpoint-info" class="endpoint-info hidden">
                    <div class="endpoint-header">
                        <img id="endpoint-thumbnail" class="endpoint-thumbnail" src="" alt="">
                        <div class="endpoint-details">
                            <h3 id="endpoint-title"></h3>
                            <p id="endpoint-category"></p>
                            <div class="endpoint-links">
                                <a id="playground-link" href="#" target="_blank" class="btn secondary small">Playground</a>
                                <a id="docs-link" href="#" target="_blank" class="btn secondary small">Docs</a>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="api-form" class="api-form hidden">
                    <h4>Parameters</h4>
                    <form id="generation-form">
                        <div id="form-fields"></div>
                    </form>
                </div>
                
            </div>
            
            <div class="right-panel">
                <div class="right-panel-header">
                    <div class="panel-tabs">
                        <button id="results-panel-tab" class="panel-tab-button active">Results</button>
                        <button id="gallery-panel-tab" class="panel-tab-button">Gallery</button>
                    </div>
                </div>
                
                <div class="image-preview-area">
                    <!-- Generation Status -->
                    <div id="generation-status" class="generation-status-panel hidden">
                        <div class="status-container">
                            <div class="status-icon">
                                <div class="status-spinner"></div>
                            </div>
                            <div class="status-content">
                                <div class="status-title">Generating Image</div>
                                <div class="status-message" id="status-message">Submitting request...</div>
                                <div class="status-progress">
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="progress-fill"></div>
                                    </div>
                                </div>
                            </div>
                            <button id="cancel-btn" class="status-cancel-btn btn secondary small">Cancel</button>
                        </div>
                    </div>
                    
                    <div id="no-images-placeholder" class="no-images-placeholder">
                        <div class="placeholder-content">
                            <span class="placeholder-icon">üñºÔ∏è</span>
                            <h3>Generated images will appear here</h3>
                            <p>Select an endpoint and generate your first image</p>
                        </div>
                    </div>
                    
                    <div id="results" class="results hidden">
                        <div class="results-header">
                            <h3>Generated Images</h3>
                            <div class="results-tabs">
                                <button id="images-tab" class="tab-button active">Images</button>
                                <button id="json-tab" class="tab-button">JSON</button>
                            </div>
                        </div>
                        <div id="result-images" class="result-images"></div>
                        <div id="result-json" class="result-json hidden">
                            <pre><code id="json-output"></code></pre>
                        </div>
                    </div>
                    
                    <div id="inline-gallery" class="inline-gallery hidden">
                        <div class="gallery-header">
                            <h3>Saved Images</h3>
                            <span id="gallery-count" class="gallery-count"></span>
                        </div>
                        <div id="inline-gallery-content" class="inline-gallery-content"></div>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- Debug Panel -->
        <div id="debug-panel" class="debug-panel hidden">
            <div class="debug-header">
                <span>Debug Log</span>
                <button id="clear-debug" class="btn secondary small">Clear</button>
            </div>
            <div id="debug-content" class="debug-content"></div>
        </div>
        
        <!-- Debug Toggle -->
        <div class="debug-toggle">
            <label>
                <input type="checkbox" id="debug-checkbox"> Debug Mode
            </label>
        </div>
        
        <!-- API Key Modal -->
        <div id="api-key-modal" class="modal hidden">
            <div class="modal-content">
                <h3>Set API Key</h3>
                <input type="password" id="api-key-input" placeholder="Enter your fal.ai API key">
                <div class="modal-actions">
                    <button id="save-api-key" class="btn primary">Save</button>
                    <button id="cancel-api-key" class="btn secondary">Cancel</button>
                </div>
            </div>
        </div>
        
        <!-- Full-screen Image Viewer -->
        <div id="fullscreen-viewer" class="fullscreen-viewer hidden">
            <div class="fullscreen-controls">
                <button id="fullscreen-prev" class="btn secondary">‚Äπ</button>
                <button id="fullscreen-download" class="btn secondary">üíæ</button>
                <button id="fullscreen-delete" class="btn secondary">üóëÔ∏è</button>
                <button id="fullscreen-close" class="btn secondary">‚úï</button>
                <button id="fullscreen-next" class="btn secondary">‚Ä∫</button>
            </div>
            <div class="fullscreen-image-container">
                <img id="fullscreen-image" src="" alt="">
            </div>
            <div class="fullscreen-info">
                <div id="fullscreen-counter"></div>
                <div id="fullscreen-metadata"></div>
            </div>
        </div>
        
        <!-- Custom Endpoint Modal -->
        <div id="custom-endpoint-modal" class="modal hidden">
            <div class="modal-content">
                <h3>Add Custom Endpoint</h3>
                <div class="custom-endpoint-tabs">
                    <button id="url-tab" class="tab-button active">From URL</button>
                    <button id="file-tab" class="tab-button">From File</button>
                </div>
                
                <div id="url-method" class="endpoint-method">
                    <label for="openapi-url">OpenAPI Schema URL</label>
                    <input type="url" id="openapi-url" placeholder="https://example.com/openapi.json">
                    <small>Enter a URL to an OpenAPI 3.0+ JSON schema</small>
                </div>
                
                <div id="file-method" class="endpoint-method hidden">
                    <label for="openapi-file">OpenAPI Schema File</label>
                    <input type="file" id="openapi-file" accept=".json">
                    <small>Select a JSON file with OpenAPI 3.0+ schema</small>
                </div>
                
                <div class="modal-actions">
                    <button id="add-custom-endpoint" class="btn primary">Add Endpoint</button>
                    <button id="cancel-custom-endpoint" class="btn secondary">Cancel</button>
                </div>
            </div>
        </div>
        
        <!-- Hidden file input for settings import -->
        <input type="file" id="import-file-input" accept=".json" style="display: none;">
    </div>
    
    <script src="app.js"></script>
</body>
</html>